{% extends "base.html" %}
{% load staticfiles %}

{% block content %}
  <section class="content">
    <div class="row">
      <div class="col">
        <div class="small-box bg-white shadow-1">
          <div class="inner px-3 py-3">
            <h3 class="text-dark">{{ profiles }}</h3>
            <p class="text-dark">Usu√°rios</p>
          </div>
          <div class="icon pr-2">
            <i class="fas fa-users text-aqua"></i>
          </div>
          <a href="#" class="small-box-footer bg-aqua"></a>
        </div>
      </div>
      <div class="col">
        <div class="small-box bg-white shadow-1">
          <div class="inner px-3 py-3">
            <h3 class="text-dark">{{ billets_wainting }}</h3>
            <p class="text-dark">Boletos Pendentes</p>
          </div>
          <div class="icon pr-2">
            <i class="fas fa-user-clock text-yellow"></i>
          </div>
          <a href="#" class="small-box-footer bg-yellow"></a>
        </div>
      </div>
      <div class="col">
        <div class="small-box bg-white shadow-1">
          <div class="inner px-3 py-3">
            <h3 class="text-dark">{{ billets_debited }}</h3>
            <p class="text-dark">Boletos Pagos</p>
          </div>
          <div class="icon pr-2">
            <i class="fas fa-user-check text-green"></i>
          </div>
          <a href="#" class="small-box-footer bg-green"></a>
        </div>
      </div>
      <div class="col">
        <div class="small-box bg-white shadow-1">
          <div class="inner px-3 py-3">
            <h3 class="text-dark">{{ billets_canceled }}</h3>
            <p class="text-dark">Boletos Cancelados</p>
          </div>
          <div class="icon pr-2">
            <i class="fas fa-user-times text-red"></i>
          </div>
          <a href="#" class="small-box-footer bg-red"></a>
        </div>
      </div>
    </div>

    <div class="box box-primary border-0 rounded-0 shadow-1">
      <div class="box-header">
        <div class="row align-items-center">
          <div class="col-md-8">
            <i class="fas fa-dollar-sign mr-2"></i>
            <h3 class="box-title">Faturamento</h3>
          </div>
        </div>
      </div>
      <div class="box-body text-center px-0">
        <canvas id="billingChart"></canvas>
      </div>
    </div>

  </section>
{% endblock %}
{% block css %}
  <link rel="stylesheet" href="{% static 'plugins/chart/css/chart.min.css' %}">
{% endblock %}
{% block js %}
  <script src="{% static 'plugins/chart/js/chart.min.js' %}"></script>
  <script>
    data_months = JSON.parse('{{ billing|safe }}')
    var data = {
      labels  : ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez'],
      datasets: [
        {
          // label: '2019',
          borderColor: '#3f4d67',
          backgroundColor: 'rgba(63, 77, 103, .8)',
          data: data_months
        },
      ]
    };
    var options = {
      aspectRatio: 4,
      legend: {
        display: false
      }
    };
    var canvas = $('#billingChart').get(0).getContext('2d');
    var billingChart = new Chart(canvas, {
      type: 'line',
      data: data,
      options: options
    });
  </script>
{% endblock %}